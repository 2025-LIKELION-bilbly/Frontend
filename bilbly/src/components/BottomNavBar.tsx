import React from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import * as S from './BottomNavBar.styles';

const HomeOnIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21 11.25V20.25C21 20.4489 20.921 20.6397 20.7803 20.7803C20.6397 20.921 20.4489 21 20.25 21H15C14.8011 21 14.6103 20.921 14.4697 20.7803C14.329 20.6397 14.25 20.4489 14.25 20.25V15.375C14.25 15.2755 14.2105 15.1801 14.1402 15.1098C14.0698 15.0395 13.9745 15 13.875 15H10.125C10.0255 15 9.93016 15.0395 9.85983 15.1098C9.78951 15.1801 9.75 15.2755 9.75 15.375V20.25C9.75 20.4489 9.67098 20.6397 9.53033 20.7803C9.38968 20.921 9.19891 21 9 21H3.75C3.55109 21 3.36032 20.921 3.21967 20.7803C3.07902 20.6397 3 20.4489 3 20.25V11.25C3.00018 10.8522 3.15834 10.4708 3.43969 10.1897L10.9397 2.68966C11.221 2.40857 11.6023 2.25067 12 2.25067C12.3977 2.25067 12.779 2.40857 13.0603 2.68966L20.5603 10.1897C20.8417 10.4708 20.9998 10.8522 21 11.25Z" fill="#252525"/> 
  </svg>
);

const HomeOffIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(3 2.5)">
      <path d="M9.75 20.25V14.25H14.25V20.25H20.25V11.25C20.2501 11.1515 20.2307 11.0539 20.1931 10.9628C20.1555 10.8718 20.1003 10.7891 20.0306 10.7194L12.5306 3.21935C12.461 3.14962 12.3783 3.0943 12.2872 3.05656C12.1962 3.01882 12.0986 2.99939 12 2.99939C11.9014 2.99939 11.8038 3.01882 11.7128 3.05656C11.6217 3.0943 11.539 3.14962 11.4694 3.21935L3.96938 10.7194C3.89975 10.7891 3.84454 10.8718 3.8069 10.9628C3.76926 11.0539 3.74992 11.1515 3.75 11.25V20.25H9.75Z" fill="#FFFCF8"/>
    </g>
  </svg>
);

const MeetingOnIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M22.5 5.25V18.75C22.5 18.9489 22.421 19.1397 22.2803 19.2803C22.1397 19.421 21.9489 19.5 21.75 19.5H15C14.4042 19.5 13.8328 19.7363 13.411 20.157C12.9892 20.5778 12.7515 21.1486 12.75 21.7444C12.753 21.8975 12.7085 22.0478 12.6225 22.1746C12.5365 22.3013 12.4134 22.3983 12.27 22.4522C12.1562 22.4961 12.0334 22.5116 11.9122 22.4973C11.791 22.483 11.6752 22.4394 11.5747 22.3702C11.4742 22.3011 11.3921 22.2084 11.3355 22.1003C11.279 21.9923 11.2496 21.872 11.25 21.75C11.25 21.1533 11.0129 20.581 10.591 20.159C10.169 19.7371 9.59674 19.5 9 19.5H2.25C2.05109 19.5 1.86032 19.421 1.71967 19.2803C1.57902 19.1397 1.5 18.9489 1.5 18.75V5.25C1.5 5.05109 1.57902 4.86032 1.71967 4.71967C1.86032 4.57902 2.05109 4.5 2.25 4.5H8.25C9.04565 4.5 9.80871 4.81607 10.3713 5.37868C10.9339 5.94129 11.25 6.70435 11.25 7.5V15.7247C11.2474 15.9182 11.3182 16.1056 11.4481 16.2491C11.578 16.3926 11.7575 16.4816 11.9503 16.4981C12.0529 16.5049 12.1558 16.4906 12.2526 16.456C12.3494 16.4213 12.4381 16.3672 12.5131 16.2968C12.5881 16.2265 12.6478 16.1415 12.6885 16.0471C12.7293 15.9527 12.7502 15.8509 12.75 15.7481V7.5C12.75 6.70435 13.0661 5.94129 13.6287 5.37868C14.1913 4.81607 14.9544 4.5 15.75 4.5H21.75C21.9489 4.5 22.1397 4.57902 22.2803 4.71967C22.421 4.86032 22.5 5.05109 22.5 5.25Z" fill="#100F0F"/>
  </svg>
);

const MeetingOffIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M22.5 5.25V18.75C22.5 18.9489 22.421 19.1397 22.2803 19.2803C22.1397 19.421 21.9489 19.5 21.75 19.5H15C14.4042 19.5 13.8328 19.7363 13.411 20.157C12.9892 20.5778 12.7515 21.1486 12.75 21.7444C12.753 21.8975 12.7085 22.0478 12.6225 22.1746C12.5365 22.3013 12.4134 22.3983 12.27 22.4522C12.1562 22.4961 12.0334 22.5116 11.9122 22.4973C11.791 22.483 11.6752 22.4394 11.5747 22.3702C11.4742 22.3011 11.3921 22.2084 11.3355 22.1003C11.279 21.9923 11.2496 21.872 11.25 21.75C11.25 21.1533 11.0129 20.581 10.591 20.159C10.169 19.7371 9.59674 19.5 9 19.5H2.25C2.05109 19.5 1.86032 19.421 1.71967 19.2803C1.57902 19.1397 1.5 18.9489 1.5 18.75V5.25C1.5 5.05109 1.57902 4.86032 1.71967 4.71967C1.86032 4.57902 2.05109 4.5 2.25 4.5H8.25C9.04565 4.5 9.80871 4.81607 10.3713 5.37868C10.9339 5.94129 11.25 6.70435 11.25 7.5V15.7247C11.2474 15.9182 11.3182 16.1056 11.4481 16.2491C11.578 16.3926 11.7575 16.4816 11.9503 16.4981C12.0529 16.5049 12.1558 16.4906 12.2526 16.456C12.3494 16.4213 12.4381 16.3672 12.5131 16.2968C12.5881 16.2265 12.6478 16.1415 12.6885 16.0471C12.7293 15.9527 12.7502 15.8509 12.75 15.7481V7.5C12.75 6.70435 13.0661 5.94129 13.6287 5.37868C14.1913 4.81607 14.9544 4.5 15.75 4.5H21.75C21.9489 4.5 22.1397 4.57902 22.2803 4.71967C22.421 4.86032 22.5 5.05109 22.5 5.25Z" fill="#FFFCF8"/>
  </svg>
);

const MyOnIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.7172 18.2391L18.6056 3.44531C18.5654 3.25185 18.4873 3.06824 18.3759 2.90505C18.2645 2.74185 18.1219 2.60227 17.9564 2.49434C17.7909 2.3864 17.6057 2.31223 17.4114 2.27609C17.2171 2.23995 17.0176 2.24255 16.8244 2.28375L12.4359 3.22687C12.0478 3.31187 11.7089 3.54668 11.4929 3.88026C11.277 4.21383 11.2015 4.61917 11.2828 5.00812L14.3944 19.8019C14.4637 20.1394 14.6471 20.4427 14.9138 20.6609C15.1805 20.8791 15.5142 20.9989 15.8588 21C15.9653 20.9999 16.0715 20.9885 16.1756 20.9662L20.5641 20.0231C20.9527 19.9379 21.292 19.7026 21.5079 19.3685C21.7239 19.0343 21.7991 18.6284 21.7172 18.2391ZM12.75 4.70156C12.75 4.69593 12.75 4.69312 12.75 4.69312L17.1375 3.75562L17.4497 5.24343L13.0622 6.1875L12.75 4.70156ZM13.6875 9.14343L13.3734 7.65281L17.7628 6.70968L18.0759 8.20031L13.6875 9.14343ZM20.25 18.5569L15.8625 19.4944L15.5503 18.0066L19.9378 17.0625L20.25 18.5484C20.25 18.5541 20.25 18.5569 20.25 18.5569ZM9.75 3H5.25C4.85218 3 4.47064 3.15803 4.18934 3.43934C3.90804 3.72064 3.75 4.10217 3.75 4.5V19.5C3.75 19.8978 3.90804 20.2794 4.18934 20.5607C4.47064 20.842 4.85218 21 5.25 21H9.75C10.1478 21 10.5294 20.842 10.8107 20.5607C11.092 20.2794 11.25 19.8978 11.25 19.5V4.5C11.25 4.10217 11.092 3.72064 10.8107 3.43934C10.5294 3.15803 10.1478 3 9.75 3ZM5.25 4.5H9.75V6H5.25V4.5ZM9.75 19.5H5.25V18H9.75V19.5Z" fill="#100F0F"/>
  </svg>
);

const MyOffIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.7172 18.2391L18.6056 3.44531C18.5654 3.25185 18.4873 3.06824 18.3759 2.90505C18.2645 2.74185 18.1219 2.60227 17.9564 2.49434C17.7909 2.3864 17.6057 2.31223 17.4114 2.27609C17.2171 2.23995 17.0176 2.24255 16.8244 2.28375L12.4359 3.22687C12.0478 3.31187 11.7089 3.54668 11.4929 3.88026C11.277 4.21383 11.2015 4.61917 11.2828 5.00812L14.3944 19.8019C14.4637 20.1394 14.6471 20.4427 14.9138 20.6609C15.1805 20.8791 15.5142 20.9989 15.8588 21C15.9653 20.9999 16.0715 20.9885 16.1756 20.9662L20.5641 20.0231C20.9527 19.9379 21.292 19.7026 21.5079 19.3685C21.7239 19.0343 21.7991 18.6284 21.7172 18.2391ZM12.75 4.70156C12.75 4.69593 12.75 4.69312 12.75 4.69312L17.1375 3.75562L17.4497 5.24343L13.0622 6.1875L12.75 4.70156ZM13.6875 9.14343L13.3734 7.65281L17.7628 6.70968L18.0759 8.20031L13.6875 9.14343ZM20.25 18.5569L15.8625 19.4944L15.5503 18.0066L19.9378 17.0625L20.25 18.5484C20.25 18.5541 20.25 18.5569 20.25 18.5569ZM9.75 3H5.25C4.85218 3 4.47064 3.15803 4.18934 3.43934C3.90804 3.72064 3.75 4.10217 3.75 4.5V19.5C3.75 19.8978 3.90804 20.2794 4.18934 20.5607C4.47064 20.842 4.85218 21 5.25 21H9.75C10.1478 21 10.5294 20.842 10.8107 20.5607C11.092 20.2794 11.25 19.8978 11.25 19.5V4.5C11.25 4.10217 11.092 3.72064 10.8107 3.43934C10.5294 3.15803 10.1478 3 9.75 3ZM5.25 4.5H9.75V6H5.25V4.5ZM9.75 19.5H5.25V18H9.75V19.5Z" fill="#FFFCF8"/>
  </svg>
);

function BottomNavBar() {
  const navigate = useNavigate();
  const location = useLocation();

  const visiblePaths = [
    '/main',
    '/landing',
    '/exchange/start/member',
    '/bookshelf'
  ];

  if (!visiblePaths.includes(location.pathname)) {
    return null;
  }

  const isHome = 
    location.pathname === '/main' || 
    location.pathname === '/landing' || 
    location.pathname === '/exchange/start/member';
  
  const isMeeting = location.pathname.includes('/reading');
  const isBookShelf = location.pathname === '/bookshelf';

  return (
    <S.BottomBackground>
      <S.NavPill>
        
        {/* 1. 홈 탭 */}
        <S.NavItem 
          $isActive={isHome} 
          onClick={() => navigate('/main')}
        >
          {isHome ? <HomeOnIcon /> : <HomeOffIcon />}
        </S.NavItem>

        {/* 2. 책 읽기 */}
        <S.NavItem 
          $isActive={isMeeting} 
          onClick={() => navigate('/reading/1/1')}
        >
          {isMeeting ? <MeetingOnIcon /> : <MeetingOffIcon />}
        </S.NavItem>

        {/* 3. 책장 (수정됨) */}
        <S.NavItem 
          $isActive={isBookShelf} 
          onClick={() => navigate('/bookshelf')}
        >
          {isBookShelf ? <MyOnIcon /> : <MyOffIcon />}
        </S.NavItem>

      </S.NavPill>
    </S.BottomBackground>
  );
}

export default BottomNavBar;