import React from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import * as S from './BottomNavBar.styles';

// --- 아이콘 컴포넌트들 (이전과 동일) ---
const HomeIcon = () => (
  <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="22.5" cy="22.5" r="22.5" fill="#FFFCF8"/>
    <path d="M31.5 21.7498V30.7498C31.5 30.9487 31.421 31.1395 31.2803 31.2801C31.1397 31.4208 30.9489 31.4998 30.75 31.4998H25.5C25.3011 31.4998 25.1103 31.4208 24.9697 31.2801C24.829 31.1395 24.75 30.9487 24.75 30.7498V25.8748C24.75 25.7753 24.7105 25.68 24.6402 25.6096C24.5698 25.5393 24.4745 25.4998 24.375 25.4998H20.625C20.5255 25.4998 20.4302 25.5393 20.3598 25.6096C20.2895 25.68 20.25 25.7753 20.25 25.8748V30.7498C20.25 30.9487 20.171 31.1395 20.0303 31.2801C19.8897 31.4208 19.6989 31.4998 19.5 31.4998H14.25C14.0511 31.4998 13.8603 31.4208 13.7197 31.2801C13.579 31.1395 13.5 30.9487 13.5 30.7498V21.7498C13.5002 21.352 13.6583 20.9706 13.9397 20.6895L21.4397 13.1895C21.721 12.9084 22.1023 12.7505 22.5 12.7505C22.8977 12.7505 23.279 12.9084 23.5603 13.1895L31.0603 20.6895C31.3417 20.9706 31.4998 21.352 31.5 21.7498Z" fill="#100F0F"/>
  </svg>
);

const MeetingIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21 3.75V17.25C21 17.4489 20.921 17.6397 20.78 17.7803C20.64 17.921 20.449 18 20.25 18H13.5C12.904 18 12.333 18.2363 11.911 18.657C11.489 19.0778 11.251 19.6486 11.25 20.2444C11.253 20.3975 11.208 20.5478 11.122 20.6746C11.037 20.8013 10.913 20.8983 10.77 20.9522C10.656 20.9961 10.533 21.0116 10.412 20.9973C10.291 20.983 10.175 20.9394 10.075 20.8702C9.974 20.8011 9.892 20.7084 9.836 20.6003C9.779 20.4923 9.75 20.372 9.75 20.25C9.75 19.6533 9.513 19.081 9.091 18.659C8.669 18.2371 8.097 18 7.5 18H0.75C0.5511 18 0.3603 17.921 0.2197 17.7803C0.079 17.6397 0 17.4489 0 17.25V3.75C0 3.5511 0.079 3.3603 0.2197 3.2197C0.3603 3.079 0.5511 3 0.75 3H6.75C7.546 3 8.309 3.3161 8.871 3.8787C9.434 4.4413 9.75 5.2044 9.75 6V14.2247C9.747 14.4182 9.818 14.6056 9.948 14.7491C10.078 14.8926 10.257 14.9816 10.45 14.9981C10.553 15.0049 10.656 14.9906 10.753 14.956C10.849 14.9213 10.938 14.8672 11.013 14.7968C11.088 14.7265 11.148 14.6415 11.189 14.5471C11.229 14.4527 11.25 14.3509 11.25 14.2481V6C11.25 5.2044 11.566 4.4413 12.129 3.8787C12.691 3.3161 13.454 3 14.25 3H20.25C20.449 3 20.64 3.079 20.78 3.2197C20.921 3.3603 21 3.5511 21 3.75Z" fill="#FFFCF8"/>
  </svg>
);

const MyIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.967 15.7392L14.856 0.9455C14.815 0.752 14.737 0.5684 14.626 0.4052C14.514 0.242 14.372 0.1025 14.206 0.0055C14.041 -0.0914 13.856 -0.1656 13.661 -0.2017C13.467 -0.2379 13.268 -0.2353 13.074 -0.1941L8.686 0.7491C8.298 0.834 7.959 1.0689 7.743 1.4024C7.527 1.736 7.451 2.1414 7.533 2.5303L10.644 17.3241C10.714 17.6616 10.897 17.9649 11.164 18.1831C11.431 18.4013 11.764 18.521 12.109 18.5222C12.215 18.5222 12.321 18.5109 12.426 18.4886L16.814 17.5453C17.203 17.4601 17.542 17.2248 17.758 16.8907C17.974 16.5565 18.049 16.1506 17.967 15.7392ZM9 2.2017C9 2.1961 9 2.1933 9 2.1933L13.388 1.2558L13.7 2.7436L9.312 3.6877L9 2.2017ZM9.938 6.6436L9.623 5.153L14.013 4.2099L14.326 5.7005L9.938 6.6436ZM16.5 16.0571L12.112 16.9946L11.8 15.5067L16.188 14.5627L16.5 16.0486C16.5 16.0542 16.5 16.0571 16.5 16.0571ZM6 0.5002H1.5C1.102 0.5002 0.721 0.6582 0.439 0.9395C0.158 1.2208 0 1.6024 0 2.0002V17.0002C0 17.398 0.158 17.7795 0.439 18.0608C0.721 18.3421 1.102 18.5002 1.5 18.5002H6C6.398 18.5002 6.779 18.3421 7.061 18.0608C7.342 17.7795 7.5 17.398 7.5 17.0002V2.0002C7.5 1.6024 7.342 1.2208 7.061 0.9395C6.779 0.6582 6.398 0.5002 6 0.5002ZM1.5 2.0002H6V3.5002H1.5V2.0002ZM6 17.0002H1.5V15.5002H6V17.0002Z" fill="#FFFCF8"/>
  </svg>
);

function BottomNavBar() {
  const navigate = useNavigate();
  const location = useLocation();

  const isHome = location.pathname.includes('/main');
  const isMeeting = location.pathname.includes('/meeting');
  const isMyPage = location.pathname.includes('/mypage');

  return (
    // 1. 하단 전체를 감싸는 고정 배경 (Footer)
    <S.BottomBackground>
      
      {/* 2. 그 안에 떠 있는 검은색 알약 */}
      <S.NavPill>
        <S.NavItem 
          $isActive={isHome} 
          onClick={() => navigate('/main')}
        >
          <HomeIcon />
        </S.NavItem>

        <S.NavItem 
          $isActive={isMeeting} 
          onClick={() => navigate('/meeting')}
        >
          <MeetingIcon />
        </S.NavItem>

        <S.NavItem 
          $isActive={isMyPage} 
          onClick={() => console.log('마이페이지')}
        >
          <MyIcon />
        </S.NavItem>
      </S.NavPill>

    </S.BottomBackground>
  );
}

export default BottomNavBar;